var Codevanilla_Utile=function(){function toggleIcon(t,e,a){t="object"==typeof t?t:$(t);var r=1===$(t).find("i").length;return null===e&&(e=$(t).hasClass("toggled")===!1),e?r?$(t).addClass("toggled").children("i.fa").removeClass($(t).attr("data-icon-2")).addClass($(t).attr("data-icon-1")):$(t).removeClass("toggled").children("span.glyphicon").removeClass($(t).attr("data-icon-2")).addClass($(t).attr("data-icon-1")):r?$(t).removeClass("toggled").children("i.fa").removeClass($(t).attr("data-icon-1")).addClass($(t).attr("data-icon-2")):$(t).addClass("toggled").children("span.glyphicon").removeClass($(t).attr("data-icon-1")).addClass($(t).attr("data-icon-2")),a&&$(t).html(r?$(t).find("i")[0]:$(t).find("span")[0]).append(a),e}function formatDateAsDaysSince(t,e){if(null===t||""===t)return" - ";var a=6e4,r=60*a,o=24*r,n=7*o,s=52*n,l=new Date(t),i=new Date,d=l.getTime()-i.getTime()<0,c=Math.round(Math.abs((l.getTime()-i.getTime())/a)),u=Math.round(Math.abs((l.getTime()-i.getTime())/a)),f=Math.round(Math.abs((l.getTime()-i.getTime())/o)),p=Math.round(Math.abs((l.getTime()-i.getTime())/n)),g=Math.round(Math.abs((l.getTime()-i.getTime())/s));return c<3?e?addTitleAttr("Just now",t):"Just now":c<60?e?addTitleAttr(c+(d?" Minutes ago":" Minutes left"),t):c+(d?" Minutes ago":" Minutes left"):u<6?e?addTitleAttr(u+(d?" Hours ago":" Hours left"),t):u+(d?" Hours ago":" Hours left"):0===f?e?addTitleAttr("Today",t):"Today":1===f?e?addTitleAttr(d?"Yesterday":"Tomorrow",t):d?"Yesterday":"Tomorrow":f<14?e?addTitleAttr(f+(d?" Days ago":" Days left"),t):f+(d?" Days ago":" Days left"):p>1&&p<52?e?addTitleAttr(p+(d?" Weeks ago":" Weeks left"),t):p+(d?" Weeks ago":" Weeks left"):g>1?e?addTitleAttr(g+(d?" Years ago":" Years left"),t):g+(d?" Years ago":" Years left"):1===g?e?addTitleAttr(g+(d?" Year ago":" Year left"),t):g+(d?" Year ago":" Year left"):t}function addTitleAttr(t,e){return $("<span/>").attr({"data-toggle":"tooltip","data-placement":"auto left",title:e}).text(t)}function nl2br(t){return t.replace(/(?:\r\n|\r|\n)/g,"<br />")}function br2nl(t){return t.replace(/<br\s*[\/]?>/gi,"\n")}function findRowBykey(t,e,a){var r=null;return $.each(t,function(o){t[o][e]===a&&(r=t[o])}),r}function extractValuesByKey(arr,key){var f=[];return $.each(arr,function(index,value){f.push(eval("value."+key))}),f}function buildSelector(t,e,a,r){for(var o=$("<select />").addClass("form-control"),n=0;n<t.length;n++){var s=t[n];$("<option/>").attr("value",r?s[r]:s.id).text(s[e]).appendTo(o)}return void 0!==a?$(o).val(a):o}function buildTableRows(t,e,a,r){void 0!==r&&r!==!0||a.empty();for(var o=0;o<e.length;o++){var n=e[o],s=$("<tr/>").data(n).addClass("dataRow").appendTo(a);$.each(t,function(t,e){var a=$("<td/>").appendTo(s),r="";if($.each(e.display,function(t,e){e.func&&$(a).append(e.func.apply(this,parseArguments(n,e.args))),e.row&&$(a).append(n[e.row]),e.literal&&$(a).append(e.literal)}),void 0!==e.action)switch(e.action.type){case"click":$(a).click(function(){e.action.func($(this).closest("tr").data()[e.action.data])}).addClass("quasiLink")}else""!==r&&a.html(r);void 0!==e.className&&(e.className.func?a.addClass(e.className.func(n[e.className.row])):a.addClass(e.className.literal))})}}function buildTable(t,e,a,r){a="object"==typeof a?a:$(a),a.empty();var o=$("<tr/>");$("<table/>").attr({id:r}).addClass("table table-bordered table-hover dataTable").append($("<thead/>").html(o)).appendTo(a);for(row in t)$("<th/>").html(row.header.title).appendTo(o)}function parseArguments(t,e){var a=[];return $.each(e,function(e,r){"lookup"===r.type?a.push(t[r.value]):a.push(r.value)}),a}function setTableOrder(t,e,a,r){var o="#"+t;a.controller!==t?($(e).removeClass("active desc asc"),$(e+" i").removeClass("fa-sort-desc fa-sort-asc").addClass("fa-sort"),$(o).addClass("active desc"),$(o).find("i").removeClass("fa-sort").addClass("fa-sort-desc"),a.controller=t,a.field=$(o).attr("data-sort-field"),a.direction="DESC"):"DESC"===a.direction?($(o).removeClass("desc").addClass("asc"),$(o).find("i").removeClass("fa-sort-desc").addClass("fa-sort-asc"),a.direction="ASC"):"ASC"===a.direction&&($(e).removeClass("active desc asc"),$(e+" i").removeClass("fa-sort-desc fa-sort-asc").addClass("fa-sort"),a.field=r.field,a.direction=r.direction,a.controller=null)}function buildPaginationUI(t,e,a){console.log(e),$(t).empty().html(parseInt(e.offset)+parseInt(e.limit)<parseInt(e.total_rows)?$("<button/>").text("more...").addClass("btn btn-primary col-md-offset-5").click(function(){e.offset=parseInt(e.offset)+parseInt(e.limit),a(!0)}):"")}function doAjax(t,e,a,r,o,n){"function"!=typeof r&&console.error("You must pass a functionn to doAjax"+r);var o=void 0===o?"":"?"+jQuery.param(o);void 0!==n&&$(n).addClass("active"),$.ajax({type:e,url:t+a+o,success:function(t){void 0!==n&&$(n).removeClass("active"),void 0===t.error?r(t):bootbox.alert(t.error)},error:function(t){void 0!==n&&$(n).removeClass("active"),t.responseJSON?bootbox.alert(t.responseJSON.error):bootbox.alert(t.responseText)}})}return{doAjax:function(t,e,a,r,o,n){doAjax(t,e,a,r,o,n)},buildSelector:function(t,e,a,r){return buildSelector(t,e,a,r)},buildTableRows:function(t,e,a,r){buildTableRows(t,e,a,r)},formatDateAsDaysSince:function(t,e){return formatDateAsDaysSince(t,e)},setTableOrder:function(t,e,a,r){setTableOrder(t,e,a,r)},buildPaginationUI:function(t,e,a){buildPaginationUI(t,e,a)},toggleIcon:function(t,e,a){toggleIcon(t,e,a)},nl2br:function(t){return nl2br(t)},br2nl:function(t){return br2nl(t)},findRowBykey:function(t,e,a){return findRowBykey(t,e,a)},extractValuesByKey:function(t,e){return extractValuesByKey(t,e)},addTitleAttr:function(t,e){return addTitleAttr(t,e)}}};