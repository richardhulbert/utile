var Codevanilla_Utile=function(){function toggleIcon(a,t,e){a="object"==typeof a?a:$(a);var r=1===$(a).find("i").length;return null===t&&(t=$(a).hasClass("toggled")===!1),t?r?$(a).addClass("toggled").children("i.fa").removeClass($(a).attr("data-icon-2")).addClass($(a).attr("data-icon-1")):$(a).removeClass("toggled").children("span.glyphicon").removeClass($(a).attr("data-icon-2")).addClass($(a).attr("data-icon-1")):r?$(a).removeClass("toggled").children("i.fa").removeClass($(a).attr("data-icon-1")).addClass($(a).attr("data-icon-2")):$(a).addClass("toggled").children("span.glyphicon").removeClass($(a).attr("data-icon-1")).addClass($(a).attr("data-icon-2")),e&&$(a).html(r?$(a).find("i")[0]:$(a).find("span")[0]).append(e),t}function formatDateAsDaysSince(a,t){if(null===a||""===a)return" - ";var e=6e4,r=60*e,o=24*r,n=7*o,s=52*n,i=new Date(a),l=new Date,d=i.getTime()-l.getTime()<0,c=Math.round(Math.abs((i.getTime()-l.getTime())/e)),u=Math.round(Math.abs((i.getTime()-l.getTime())/e)),f=Math.round(Math.abs((i.getTime()-l.getTime())/o)),p=Math.round(Math.abs((i.getTime()-l.getTime())/n)),g=Math.round(Math.abs((i.getTime()-l.getTime())/s));return c<3?t?addTitleAttr("Just now",a):"Just now":c<60?t?addTitleAttr(c+(d?" Minutes ago":" Minutes left"),a):c+(d?" Minutes ago":" Minutes left"):u<6?t?addTitleAttr(u+(d?" Hours ago":" Hours left"),a):u+(d?" Hours ago":" Hours left"):0===f?t?addTitleAttr("Today",a):"Today":1===f?t?addTitleAttr(d?"Yesterday":"Tomorrow",a):d?"Yesterday":"Tomorrow":f<14?t?addTitleAttr(f+(d?" Days ago":" Days left"),a):f+(d?" Days ago":" Days left"):p>1&&p<52?t?addTitleAttr(p+(d?" Weeks ago":" Weeks left"),a):p+(d?" Weeks ago":" Weeks left"):g>1?t?addTitleAttr(g+(d?" Years ago":" Years left"),a):g+(d?" Years ago":" Years left"):1===g?t?addTitleAttr(g+(d?" Year ago":" Year left"),a):g+(d?" Year ago":" Year left"):a}function addTitleAttr(a,t){return $("<span/>").attr({"data-toggle":"tooltip","data-placement":"auto left",title:t}).text(a)}function nl2br(a){return a.replace(/(?:\r\n|\r|\n)/g,"<br />")}function br2nl(a){return a.replace(/<br\s*[\/]?>/gi,"\n")}function findRowBykey(a,t,e){var r=null;return $.each(a,function(o){a[o][t]===e&&(r=a[o])}),r}function extractValuesByKey(arr,key){var f=[];return $.each(arr,function(index,value){f.push(eval("value."+key))}),f}function buildSelector(a,t,e,r){for(var o=$("<select />").addClass("form-control"),n=0;n<a.length;n++){var s=a[n];$("<option/>").attr("value",r?s[r]:s.id).text(s[t]).appendTo(o)}return void 0!==e?$(o).val(e):o}function buildTableRows(a,t,e,r){void 0!==r&&r!==!0||e.empty();for(var o=0;o<t.length;o++){var n=t[o],s=$("<tr/>").data(n).addClass("dataRow").appendTo(e);$.each(a,function(a,t){var e=$("<td/>").appendTo(s),r="";$.each(t.display,function(a,t){t.func&&$(e).append(t.func.apply(this,parseArguments(n,t.args))),t.row&&$(e).append(n[t.row]),t.literal&&$(e).append(t.literal)}),void 0!==t.action?Array.isArray(t.action)?$.each(t.action,function(a,t){$(e).on(t.type,function(a){t.func.apply(this,parseArguments($(a.currentTarget).closest(".dataRow").data(),t.args))})}):$(e).on(t.action.type,function(a){t.action.func.apply(this,parseArguments($(a.currentTarget).closest(".dataRow").data(),t.action.args))}).addClass("quasiLink"):""!==r&&e.html(r),void 0!==t.className&&(t.className.func?e.addClass(t.className.func.apply(this,parseArguments(n,t.className.args))):e.addClass(t.className.literal))})}}function buildTable(a,t,e,r,o,n){e="object"==typeof e?e:$(e),e.empty();var s=$("<tr/>"),l=$("<tbody/>"),d=$("<tfoot/>"),c=$("<td/>").attr({colspan:a.length}).appendTo(d);$("<table/>").attr({id:r}).addClass("table table-bordered table-hover dataTable").append($("<thead/>").html(s)).append(l).append(d).appendTo(e);for(i in a){var u=a[i];$("<th/>").html(u.header.title).appendTo(s)}buildTableRows(a,t,l),void 0!=o&&void 0!=n&&buildPaginationUI(c,o,n)}function parseArguments(a,t){var e=[];return $.each(t,function(t,r){switch(r.type){case"lookup":e.push(a[r.value]);break;case"row":e.push(a);break;default:e.push(r.value)}}),e}function setTableOrder(a,t,e,r){var o="#"+a;e.controller!==a?($(t).removeClass("active desc asc"),$(t+" i").removeClass("fa-sort-desc fa-sort-asc").addClass("fa-sort"),$(o).addClass("active desc"),$(o).find("i").removeClass("fa-sort").addClass("fa-sort-desc"),e.controller=a,e.field=$(o).attr("data-sort-field"),e.direction="DESC"):"DESC"===e.direction?($(o).removeClass("desc").addClass("asc"),$(o).find("i").removeClass("fa-sort-desc").addClass("fa-sort-asc"),e.direction="ASC"):"ASC"===e.direction&&($(t).removeClass("active desc asc"),$(t+" i").removeClass("fa-sort-desc fa-sort-asc").addClass("fa-sort"),e.field=r.field,e.direction=r.direction,e.controller=null)}function buildPaginationUI(a,t,e){$(a).empty().html(parseInt(t.offset)+parseInt(t.limit)<parseInt(t.total_rows)?$("<button/>").text("more...").addClass("btn btn-primary ").click(function(){t.offset=parseInt(t.offset)+parseInt(t.limit),e(!0)}):"")}function doAjax(a,t,e,r,o,n,s){"function"!=typeof r&&console.error("You must pass a functionn to doAjax"+r);var i=void 0===o?"":"?"+jQuery.param(o);void 0!==n&&$(n).addClass("active");var l=void 0===s?{}:s;$.ajax({type:t,url:a+e+i,header:l,success:function(a){void 0!==n&&$(n).removeClass("active"),void 0===a.error?r(a):bootbox.alert(a.error)},error:function(a){void 0!==n&&$(n).removeClass("active"),a.responseJSON?bootbox.alert(a.responseJSON.error):bootbox.alert(a.responseText)}})}return{doAjax:function(a,t,e,r,o,n){doAjax(a,t,e,r,o,n)},buildSelector:function(a,t,e,r){return buildSelector(a,t,e,r)},buildTable:function(a,t,e,r,o,n){buildTable(a,t,e,r,o,n)},buildTableRows:function(a,t,e,r){buildTableRows(a,t,e,r)},formatDateAsDaysSince:function(a,t){return formatDateAsDaysSince(a,t)},setTableOrder:function(a,t,e,r){setTableOrder(a,t,e,r)},buildPaginationUI:function(a,t,e){buildPaginationUI(a,t,e)},toggleIcon:function(a,t,e){toggleIcon(a,t,e)},nl2br:function(a){return nl2br(a)},br2nl:function(a){return br2nl(a)},findRowBykey:function(a,t,e){return findRowBykey(a,t,e)},extractValuesByKey:function(a,t){return extractValuesByKey(a,t)},addTitleAttr:function(a,t){return addTitleAttr(a,t)}}};